<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Curso Senai - Cadastro de Peças</title>
        <link rel="stylesheet" type="text/css" href="assets/css/pecas.css">
        <link rel="stylesheet" type="text/css" href="assets/bootstrap/css/bootstrap.min.css"/>
    </head>
    <body>
        <h1 align="center">Cadastro de peças (Limite de peças 5)</h1>
        <br>
        <h1 align="center">Digite dados da peças</h1>
        <div align="center">
                <div class="input-container">
                        <label>Descrição da Peça</label>
                        <input class="input" type="text" id="nomePeca" name="nomePeca" placeholder="Nome" autofocus>
                        <br>
                        <label>Peso da peça</label>
                        <input class="input" type="text" id="pesoPeca" placeholder="Peso">
                        <br>
                        <br>
                        <button type="submit" id="incluir" disabled>Incluir</button>  
                        <br>
                        <br>
                        <h2>Lista</h2>       
                <div>
                <div>
                    <table name="tabelaPecas">
                        <thead>
                            <tr>
                                <th>Item</th>
                                <th>Nome</th>
                                <th>Peso</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>    
                </div>
        </div>
    </body>
    <script src="assets/js/jquery-3.6.0.min.js" type="text/javascript"></script>
    <script>
		// Função para enviar dados do formulário
        $("button").click(function(){
            // Carrega variaveis com dados informados no formulario HTML
            var nomePeca = $("#nomePeca").val()
            var pesoPeca = $("#pesoPeca").val()

            // Verificação de peso da peça a ser incluida
            if (pesoPeca >= 100) {
                // Valida quantidade de itens da lista
                var quantidadeLinhas = $('tr').length;
                if (quantidadeLinhas <= 5) {
                    alert("Cadastrou o item "+quantidadeLinhas)
                    // Monta a linha da tabela
                    linhaTabela = "<tr><td>"+quantidadeLinhas+"</td><td>"+nomePeca+"</td><td>" 
                        + pesoPeca + "</td></tr>"
                    corpoTabela = $("table tbody")
                    corpoTabela.append(linhaTabela)
                } else {
                    // Desabilita o botão
                    $("button").attr("disabled",true);
                }
            } else if (pesoPeca > 0) {
                alert("Peça abaixo do peso permitido")
            } else {
                alert("Informe o peso da peça")
            }
        });
    
        // Valida tamanho da string do nome da peça
        $("#nomePeca").blur(function() {
            var tamStringNomePeca = $("#nomePeca").val().length
            if (tamStringNomePeca <= 3) {
                // Mostra mensagem para descricao invalida  
                alert("Descricao invalida")

                // Desabilita o botão
                $("button").attr("disabled",true);

                //Limpa o campo
                $("#nomePeca").val("");

            } else {
                // Se a descrição for valida, habilita o botão
                $("button").attr("disabled",false);
            }
		});
    </script>
</html>